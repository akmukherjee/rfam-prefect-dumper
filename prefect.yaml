name: Prefect-Demo-Workflow
prefect-version: 2.14.19

build: null
push: null

pull:
  - prefect.projects.steps.git_clone_project:
      id: clone-step
      repository: https://github.com/akmukherjee/rfam-prefect-dumper.git

  - prefect.projects.steps.shell_run_command:
      command: |
        apt-get update && apt-get install -y mysql-client

  - prefect.projects.steps.pip_install_requirements:
      requirements_file: requirements.txt
      directory: "{{ clone-step.directory }}"
      stream_output: False

deployments:
  - name: rfam-mysql-dump
    version: null
    tags: ["mysql", "rfam"]
    description: "Dumps the family table or entire Rfam DB using mysqldump"
    entrypoint: main.py:rfam_dump_flow
    schedule: null

    parameters: {}

    work_pool:
      name: fnl-bento-8gb-prefect-2.20.3-python3.9
      work_queue_name: null
      job_variables: {}
